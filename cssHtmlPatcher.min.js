var $=jQuery.noConflict();var bClickMenu=false;var _paq=_paq||[];function css_patcher(){initializesBodyTagByCss()}function html_patcher(){addsClassFromNameOfJspOrIdOfMainContainer()}function navigationPatcher(){insertsSubmenuPictoIntoTheHeader()}function udpateResponsive(){makeTheHtmlPageResponsive()}function uploadPerDiemPopIn(){personalizeThePopInPerDiem()}function replacesAccentedCharacters(id){id=id.replace(new RegExp("é","g"),"e");id=id.replace(new RegExp("è","g"),"e");id=id.replace(new RegExp("ê","g"),"e");id=id.replace(new RegExp("à","g"),"a");return id}function createCookie(name,value,days){if(days){var date=new Date;date.setTime(date.getTime()+days*24*60*60*1e3);var expires="; expires="+date.toGMTString()}else var expires="";document.cookie=name+"="+value+expires+"; path=/"}function readCookie(name){var nameEQ=name+"=";var ca=document.cookie.split(";");for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==" ")c=c.substring(1,c.length);if(c.indexOf(nameEQ)==0)return c.substring(nameEQ.length,c.length)}return null}function eraseCookie(name){createCookie(name,"",-1)}function getValueNameInUrlRequest(sNameVariable){var vars={};window.location.href.replace(/[?&]+([^=&]+)=?([^&]*)?/gi,function(m,key,value){vars[key]=value!==undefined?value:""});if(vars[sNameVariable]!==undefined){return vars[sNameVariable]?vars[sNameVariable]:null}else{return""}}function removeThePerDiemClass(){if($("body").hasClass("overlay-perdiem")){$("body").removeClass("overlay-perdiem")}if($("body").hasClass("perdiem-list")){$("body").removeClass("perdiem-list")}}function personalizeThePopInPerDiem(){if($("body").hasClass("expense")){if($("div").hasClass("overlay-perdiem")){$("body").addClass("overlay-perdiem")}if($("div").hasClass("perdiem-list")){$("body").addClass("perdiem-list")}}}function changeTheProductAndUserIconsFromPngToSvg(){$("body").addClass("svg-icon");if($("#sct_tvldApplication").length>0){$("#hdr_nav").children("aside").children("#sct_tvldApplication").children("ul").children("li").each(function(){var nameOfIconSVG=[];var titleLabel="";nameOfIconSVG=$(this).children("a").children("img").attr("src").split("/");titleLabel=$(this).children("a").children("img").attr("title");$(this).addClass(nameOfIconSVG[nameOfIconSVG.length-1].slice(0,nameOfIconSVG[nameOfIconSVG.length-1].indexOf(".")));$(this).children("a").children("img").attr("alt","");$(this).children("a").children("img").removeAttr("title");if(typeof titleLabel!==typeof undefined&&titleLabel!==false){$(this).children("a").attr("title",titleLabel)}})}}function initializesBodyTagByCss(){var bFavIncon=false;var sNameOS;var sListClasses;var sNumVersion;var sUrlPage=window.location.pathname;var sUserAgent=navigator.userAgent;var sUserLang=navigator.language||navigator.userLanguage;var aProducts=["Travel","Expense","Invoice","Reporting","Compta","Extraction","Monitoring"];var aBrowsers=["Android","X11","iPad","iPhone","OPR","Chrome","Safari","Firefox","MSIE","NET"];var aOperatingSystem=["Mac","Macintosh","Linux","Windows"];var aVersionUA=[];var aNameVersion=[];var aNumVersionIE=[];$("body").addClass("withJs");if(sUserLang!==""){$("body").addClass(sUserLang)}for(var h in aOperatingSystem){if(sUserAgent.indexOf(aOperatingSystem[h])>-1){sNameOS=aOperatingSystem[h].toLowerCase();$("body").addClass(sNameOS);break}}for(var i in aBrowsers){if(sUserAgent.indexOf(aBrowsers[i])>-1){sListClasses=aBrowsers[i].toLowerCase();if(sListClasses==="opr"){sListClasses+=" chrome"}if(sListClasses==="msie"||sListClasses==="ipad"||sListClasses==="iphone"||sListClasses==="android"){aVersionUA=sUserAgent.slice(sUserAgent.indexOf(aBrowsers[i]),sUserAgent.length).split(".");if(sListClasses!=="android"){aNameVersion=aVersionUA[0].split(" ")}else{aNameVersion=aVersionUA[0].split(";")}if(sListClasses==="msie"){sListClasses+=" "+aNameVersion[0].toLowerCase()+aNameVersion[1]}if(sListClasses==="ipad"){sListClasses+=" tablette ios"+aNameVersion[3].toLowerCase().slice(0,1);if(sUserAgent.indexOf("CriOS")>0){sListClasses+=" chrome"}else{sListClasses+=" safari"}}if(sListClasses==="iphone"){sListClasses+=" smartphone ios"+aNameVersion[4].toLowerCase().slice(0,1)+" safari"}if(sListClasses==="android"){sListClasses+=" smartphone";if(sUserAgent.indexOf("Firefox")>0){sListClasses+=" firefox"}else{if(sUserAgent.indexOf("Chrome")>0){sListClasses+=" chrome"}else{if(sUserAgent.indexOf("Safari")>0){sListClasses+=" safari"}}}}}if(sListClasses==="x11"){sListClasses+=" tablette android";if(sUserAgent.indexOf("Firefox")>0){sListClasses+=" firefox"}else{if(sUserAgent.indexOf("Chrome")>0){sListClasses+=" chrome"}}}if(sListClasses.slice(0,4)!=="msie"){$("body").addClass("useDeg")}else{aNumVersionIE=sListClasses.split(" ");sNumVersion=aNumVersionIE[aNumVersionIE.length-1].slice(4,aNumVersionIE[aNumVersionIE.length-1].length);if(sNumVersion!=="Old"&&sNumVersion!=="9"){$("body").addClass("useDeg")}}$("body").addClass(sListClasses);break}}for(var i in aProducts){if(!$("body").hasClass("help-online")){if($("body").hasClass(aProducts[i].toLowerCase())){$("body").removeClass(aProducts[i].toLowerCase())}}}if(sUrlPage.toLowerCase().indexOf("intelligence")>0){$("body").addClass(aProducts[3].toLowerCase())}else{if(sUrlPage.toLowerCase().indexOf("extraction")>0){$("body").addClass(aProducts[5].toLowerCase())}else{if(sUrlPage.toLowerCase().indexOf("expense")>0){$("body").addClass(aProducts[1].toLowerCase())}else{if(sUrlPage.toLowerCase().indexOf("invoice")>0){$("body").addClass(aProducts[2].toLowerCase())}else{if(sUrlPage.toLowerCase().indexOf("accounting")>0){$("body").addClass(aProducts[4].toLowerCase())}else{if(sUrlPage.toLowerCase().indexOf("interface")>0||sUrlPage.toLowerCase().indexOf("monitoring")>0){$("body").addClass(aProducts[6].toLowerCase())}else{$("body").addClass(aProducts[0].toLowerCase())}}}}}}$("head").children("link").each(function(){if($(this).attr("rel")==="shortcut icon"){bFavIncon=true}});if(!bFavIncon){$("head").append('<link rel="shortcut icon" type="image/x-icon" href="/graph/_shared/img/custom/TDTE/favicon.ico" />')}else{$("head").children('link[rel="shortcut icon"]').attr("href","/graph/_shared/img/custom/TDTE/favicon.ico")}var iNumberClassByTDTE=0;var tClassInBody=[];tClassInBody=$("body").attr("class").split(" ");if($("body").hasClass("travel")){for(i=0;i<tClassInBody.length;i++){if(tClassInBody[i].toLowerCase()==="tdte"){iNumberClassByTDTE++}}$("body").removeClass("tdte");if(iNumberClassByTDTE>1||$("body").hasClass("scp3")||$("body").hasClass("aegbt-fr")||$("body").hasClass("aegbt-uk")){$("body").addClass("tdte")}}else{for(i=0;i<tClassInBody.length;i++){if(tClassInBody[i].toUpperCase()==="TDTE"){iNumberClassByTDTE++}}$("body").removeClass("TDTE");if(iNumberClassByTDTE>=1){$("body").addClass("tdte")}}changeTheProductAndUserIconsFromPngToSvg()}function addsClassFromNameOfJspOrIdOfMainContainer(){var tNameOfRepertory=[];var sNameOfJsp;var sLocationPathName;var sListOfClasses;var sTitleOfThePage;if($("body").hasClass("travel")){if($("#TravelSite").size()>0){$("body").addClass("travelsite")}if($("#triplist").size()>0){$("body").addClass("triplist")}if($("#AssistanceRequest").size()>0){$("body").addClass("assistanceRequest tdte")}if($("#RiskManager").size()>0){$("body").addClass("riskManager")}if($(".container-L").size()==2){$("body").addClass("assistanceRepertory")}if($(location).attr("href").indexOf("Itinerary")>0){$("body").addClass("itinerary")}else{if($("body").hasClass("itinerary")){$("body").removeClass("itinerary")}}if($(".sct_detailsCar").size()>0){$(".sct_detailsCar").each(function(){if($(this).children("section").children("header").children("ol").children("li").size()>3){$(this).addClass("detailcar-multiline")}})}if(!$("body").hasClass("repository")){$("img").each(function(){if($(this).attr("src").indexOf("PrintPicto")>0){$(this).attr("src","/graph/ReservationSite/Images/TDTE/EtktPrint.png")}})}}sLocationPathName=$(location).attr("pathname");tNameOfRepertory=sLocationPathName.split("/");if(tNameOfRepertory[tNameOfRepertory.length-1].indexOf("?")>0){sNameOfJsp=tNameOfRepertory[tNameOfRepertory.length-1].slice(0,tNameOfRepertory[tNameOfRepertory.length-1].indexOf("?")).toLowerCase();if(sNameOfJsp.indexOf(".")>0){sNameOfJsp=sNameOfJsp.slice(0,sNameOfJsp.indexOf("."))}}else{sNameOfJsp=tNameOfRepertory[tNameOfRepertory.length-1].slice(0,tNameOfRepertory[tNameOfRepertory.length-1].indexOf(".")).toLowerCase()}$("body").addClass(sNameOfJsp);if($("#dv_infoPage").size()>0){sListOfClasses=$("#dv_infoPage").attr("class");$("body").addClass(sListOfClasses);if($("#dv_infoPage").attr("title")!==undefined){sTitleOfThePage=$("#dv_infoPage").attr("title")}else{sTitleOfThePage=$("#dv_infoPage").children("h1").text()}$(document).attr("title",$(document).attr("title")+" - "+sTitleOfThePage);if($("body").hasClass("facture")){$("body").addClass("facture_modelV2")}if(($("body").hasClass("expense")||$("body").hasClass("travel"))&&$("body").hasClass("invoice")){if($("body").hasClass("expense")){$("body").removeClass("expense")}else{$("body").removeClass("travel")}}}}function clickOnSubmenu(){$("#li_menu").click(function(){if(!bClickMenu){$(this).addClass("collapsed");bClickMenu=true}else{if($(this).hasClass("collapsed")){$(this).removeClass("collapsed");bClickMenu=false}}return false});$("#li_menu").children("ul").children("li").children("a").click(function(){$(location).attr("href",$(this).attr("href"))});$("#hdr_nav").children("nav").children("ul").children("li").hover(function(){if(this.id!=="li_menu"&&bClickMenu){$("#li_menu").removeClass("collapsed");bClickMenu=false}})}function insertsSubmenuPictoIntoTheHeader(){var sHtmlCode="";var bShowingPicto=false;var iLinksWidth=0;var iMenuWidth=50;var iHelpWidth=$("#li_help").width();var iNavigationBarWidth=$("#hdr_nav").children("nav").children("ul").width()-iHelpWidth-iMenuWidth;var iNumberOfLinks=$("#hdr_nav").children("nav").children("ul").children("li").length;$("#hdr_nav").children("nav").children("ul").children("li").each(function(){if($(this).attr("style")==="display: none;"){$(this).addClass("noInsertInMenu")}});$("#hdr_nav").children("nav").children("ul").children("li").each(function(i){if(!$(this).hasClass("noInsertInMenu")){iLinksWidth+=$(this).width();$(this).addClass("displayMenu");if(i===0){$(this).addClass("li_firsTab")}if(this.id==="li_help"){$(this).addClass("li_lasTab")}else{if(iLinksWidth>iNavigationBarWidth&&i<iNumberOfLinks){$(this).removeClass("displayMenu");$(this).addClass("li_menuCompo");if($(this).hasClass("selected")){sHtmlCode+='<li class="selected">'+$(this).html()+"</li>";bShowingPicto=true}else{sHtmlCode+="<li>"+$(this).html()+"</li>"}}}}if(iLinksWidth>iNavigationBarWidth&&i===iNumberOfLinks-1&&sHtmlCode!==""){if(bShowingPicto){$(this).parent().append('<li id="li_menu" class="displayMenu selected"><a href="#"><img src="/graph/_shared/img/default/header/submenu.png" alt="[-]" /></a><ul>'+sHtmlCode+"</ul></li>")}else{$(this).parent().append('<li id="li_menu" class="displayMenu"><a href="#"><img src="/graph/_shared/img/default/header/submenu.png" alt="[-]"/></a><ul>'+sHtmlCode+"</ul></li>")}}});clickOnSubmenu()}function animatesWidthOfBlock(iMarginLeft,iMinWidth,iMaxWidth){if(iMarginLeft!==""){$("#li_menu").children("ul").animate({marginLeft:iMarginLeft+"px",minWidth:iMinWidth+"px",maxWitdh:iMaxWidth+"px"})}else{$("#li_menu").children("ul").animate({minWidth:iMinWidth+"px",maxWitdh:iMaxWidth+"px"})}}function animatesDisplayOfNavigationMenu(){var sLabelText;$("#li_menu a").click(function(){if(!$(this).parents("li").hasClass("collapsed")){$(this).parents().addClass("collapsed");if(!$("body").hasClass("smartphone")){$("#li_menu").children("ul").css("min-height",$("body").height()+"px");$(this).parents("nav").css("min-height",$("body").height()+"px");animatesWidthOfBlock(-30,250,250)}else{$("#li_menu > ul").css("min-height",$("body").height()-80+"px");$(this).parents("nav").css("min-height",$("body").height()-70+"px");animatesWidthOfBlock(-125,185,185)}}else{$(this).parents().removeClass("collapsed");$(this).parents("nav").css("min-height","0px");animatesWidthOfBlock("",0,0)}});$("body.tablette #hdr_nav").children("nav").children("ul").children("li#li_menu").children("ul").children("li").children("a").each(function(){sLabelText=$(this).text().toLowerCase();if(sLabelText.indexOf(" ")>0)sLabelText=sLabelText.slice(0,sLabelText.indexOf(" ")-1);$(this).addClass("a_pictoLnk "+sLabelText)})}function definesMetaViewPortInHeadTag(){var iBodyWidth=$("body").width();var iScreenWidth=screen.width;var iScaleRatio;var iScaleRatioMax;var oViewPortMeta;if(($("body").hasClass("ipad")||$("body").hasClass("iphone"))&&$("body").hasClass("safari")){iBodyWidth+=40}if($("body").hasClass("android")&&$("body").hasClass("safari")&&$("body").hasClass("portrait")||($("body").hasClass("ipad")||$("body").hasClass("iphone"))&&$("body").hasClass("landscape")){iScreenWidth=screen.height}if($("body").hasClass("iphone")||$("body").hasClass("ipad")||$("body").hasClass("android")){iScaleRatio=iScreenWidth/iBodyWidth}else{if($("body").hasClass("android")&&$("body").hasClass("safari")&&$("body").hasClass("landscape")){iScaleRatio=iBodyWidth/iScreenWidth}else{iScaleRatio=1}}iScaleRatio=Math.round(iScaleRatio*100)/100;if(parseInt(iScaleRatio)>10){iScaleRatio=10}if($("body").hasClass("iphone")){iBodyWidth=iScreenWidth}if($("body").hasClass("tablette")){iScaleRatioMax=iScaleRatio*1.5}if($("body").hasClass("smartphone")){iScaleRatioMax=iScaleRatio*3.5}oViewPortMeta=document.querySelector("meta[name=viewport]");if(oViewPortMeta){oViewPortMeta.setAttribute("content","width="+iBodyWidth+", initial-scale="+iScaleRatio+", maximum-scale="+iScaleRatio+", user-scalable=no")}if($("body").hasClass("ipad")||$("body").hasClass("iphone")){$(window).bind("resize",function(e){if($(window).scrollTop()===0){}})}}function choosesPortaitOrLandscapeOrientation(){if($("body").hasClass("tablette")||$("body").hasClass("smartphone")){if(window.innerHeight>window.innerWidth){$("body").addClass("portrait")}else{$("body").addClass("landscape")}$(window).bind("orientationchange",function(){if(window.innerHeight>window.innerWidth){if($("body").hasClass("android")){$("body").removeClass("portrait");$("body").addClass("vers-landscape landscape")}else{$("body").removeClass("landscape");$("body").removeClass("vers-landscape");$("body").addClass("portrait")}}else{if($("body").hasClass("android")){$("body").removeClass("landscape");$("body").removeClass("vers-landscape");$("body").addClass("portrait")}else{$("body").removeClass("portrait");$("body").addClass("vers-landscape landscape")}}});definesMetaViewPortInHeadTag()}}function makeTheHtmlPageResponsive(){if(($("body").hasClass("tablette")||$("body").hasClass("smartphone"))&&!$("body").hasClass("mediaqueries")){animatesDisplayOfNavigationMenu();choosesPortaitOrLandscapeOrientation();definesMetaViewPortInHeadTag()}}function inscriptsTheYearOfTheCopyright(){var oToday=new Date;if(!$("body").hasClass("iphone")){if($("#ftr_nav").size()>0){$("#ftr_nav").children("p").prepend("&copy;"+oToday.getFullYear()+" - ")}else{$("body").children("footer").children("p").prepend("&copy;"+oToday.getFullYear()+" - ")}}else{$("body").children("footer").children("p").prepend("&copy;2017 - ")}}function handlesTheFancyBoxMethod(){$("body").children("footer").children("p").children("a.a_fancybox").click(function(){$.fancybox.open({href:$(this).attr("href"),type:"iframe",padding:5});if(!$(this).hasClass("popup")){$("iframe.fancybox-iframe").attr("scrolling","no")}else{$("iframe.fancybox-iframe").attr("scrolling","yes")}return false})}function presentsTravelerInformationOnMyTrips(){var iHeightTripItem;var iHeightTripItemRight;if($("body").hasClass("travel")&&$("body").hasClass("triplist")){$(".trip-content").each(function(){iHeightTripItem=iHeightTripItemRight=0;$(this).children(".trip-item").each(function(){if(!$(this).hasClass("right-column")){iHeightTripItem+=$(this).height()}});iHeightTripItem+=23;if($(this).children(".right-column").size()>0){$(this).children(".right-column").each(function(i){$(this).css("margin-top","-"+(iHeightTripItem-iHeightTripItemRight)+"px");iHeightTripItemRight+=$(this).height()+20})}})}}function limitsDisplayOfTripSharingLines(){if($("body").hasClass("travel")&&$("#dv_sharing").size()>0){var sLabelText=$("#dv_sharing").children("p.p_tradLabel").text();var iNumberOfLayer=$("#dv_sharing").children("div").size();if(iNumberOfLayer>2){$("#dv_sharing").children("div").each(function(i){if(i===1){$(this).append('<span class="spn_moreShare">'+sLabelText+"</span>")}})}$("#dv_sharing span.spn_moreShare").click(function(){if(!$("#dv_sharing").hasClass("allUserSharing")){$("#dv_sharing").addClass("allUserSharing");$(".spn_moreShare").text("")}else{$("#dv_sharing").removeClass("allUserSharing");$(".spn_moreShare").text(sLabelText)}})}}function formateTheNameOfHotel(){var iWidthAvailable=115;var iNumberOfStars;var iNumberOfHearts;var iWidthOfStarsBlock;var iWidthOfHeartsBlockvar;var iWidthOfHotelBloc;if($("body").hasClass("travelsite")&&$("body").hasClass("homemain")){$(".list-result .list-all").children("div").children(".hotel.list").each(function(){iNumberOfStars=iWidthOfStarsBlock=iNumberOfHearts=iWidthOfHeartsBlockvar=iWidthOfHotelBloc=0;if($(this).children(".block-hotel-room").children(".block-hotel").children(".photo-hotel").children("a").children("img").attr("src")===undefined){$(this).addClass("hotel-no-picture");iWidthAvailable=0;$(this).children(".block-hotel-room").children(".block-hotel").children(".block-adresse").children("div").children(".span5").css("margin-left","0px")}iNumberOfStars=$(this).children(".block-hotel-room").children(".block-hotel").children(".block-adresse").children("div").children(".block-hotel-info").children(".all-rates").children(".stars").children("div").size();iWidthOfStarsBlock=iNumberOfStars*20;iNumberOfHearts=$(this).children(".block-hotel-room").children(".block-hotel").children(".block-adresse").children("div").children(".block-hotel-info").children(".all-rates").children(".prefsociety").children("div").size();iWidthOfHeartsBlockvar=iNumberOfHearts*20;iWidthOfHotelBloc=$(this).children(".block-hotel-room").children(".block-hotel").width();$(this).children(".block-hotel-room").children(".block-hotel").children(".block-adresse").children("div").children("div").children(".hotel-name").css("width",parseInt(iWidthOfHotelBloc-(iWidthAvailable+iWidthOfStarsBlock+iWidthOfHeartsBlockvar)-20)+"px")})}}function checkEmailAdress(email){var sEmailStructure=/^(.+)@(.+)$/;var sSpecialCharacters='\\(\\)<>@,;:\\\\\\"\\.\\[\\]';var sValideCharacters="[^\\s"+sSpecialCharacters+"]";var sQuotedUser='("[^"]*")';var sDomainStructure=/^\[(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})\]$/;var sEmailElement=sValideCharacters+"+";var sWord="("+sEmailElement+"|"+sQuotedUser+")";var sUserStructure=new RegExp("^"+sWord+"(\\."+sWord+")*$");var sDoMainStructure=new RegExp("^"+sEmailElement+"(\\."+sEmailElement+")*$");var matchArray=email.match(sEmailStructure);if(matchArray===null){return false}var sUserName=matchArray[1];var sNameOfDomain=matchArray[2];if(sUserName.match(sUserStructure)===null){return false}var IPArray=sNameOfDomain.match(sDomainStructure);if(IPArray!==null){for(var i=1;i<=4;i++){if(IPArray[i]>255){return false}}return true}var domainArray=sNameOfDomain.match(sDoMainStructure);if(domainArray===null){return false}var sEmailElementStructure=new RegExp(sEmailElement,"g");var domArr=sNameOfDomain.match(sEmailElementStructure);var sLenEmail=domArr.length;if(domArr[domArr.length-1].length<2||domArr[domArr.length-1].length>3){return false}if(sLenEmail<2){return false}return true}function checkFormIsSubmitted(){var bFormIsSubmitted=true;$("form").children("div").each(function(){if($(this).hasClass("error")){bFormIsSubmitted=false}});if(!bFormIsSubmitted){$('input[type="submit"]').addClass("error");return false}else{$('input[type="submit"]').removeClass("error")}}function managesEventsInTheForm(){var bFormIsSubmitted;var bchecksValueEmailField;if($("body").hasClass("travelaccess")||$("body").hasClass("loginform")||$("body").hasClass("emailforgetpasswordsending")){$('input[type="submit"]').click(function(){bFormIsSubmitted=true;if($(this).hasClass("error")){$(this).removeClass("error")}$("form").children("div").each(function(){if($(this).children("input").val()===""){if($(this).hasClass("conforme")){$(this).removeClass("conforme")}$(this).addClass("error");bFormIsSubmitted=false}});if(!bFormIsSubmitted){$(this).addClass("error");return false}});$('input[type="text"]').focusout(function(){bchecksValueEmailField=true;if($(this).attr("name")==="T_Email"){if(!checkEmailAdress($(this).val())){bchecksValueEmailField=false}}if($(this).val()!==""&&bchecksValueEmailField){if($(this).parent("div").hasClass("error")){$(this).parent("div").removeClass("error")}$(this).parent("div").addClass("conform")}else{if($(this).parent("div").hasClass("conform")){$(this).parent("div").removeClass("conform")}$(this).parent("div").addClass("error")}checkFormIsSubmitted()});$('input[type="password"]').focusout(function(){if($(this).val()!==""){if($(this).parent("div").hasClass("error")){$(this).parent("div").removeClass("error")}$(this).parent("div").addClass("conform")}else{if($(this).parent("div").hasClass("conform")){$(this).parent("div").removeClass("conform")}$(this).parent("div").addClass("error")}checkFormIsSubmitted()})}}function insertsCodeGraphicOfThemeClient(){var sThemeGraphicOfClient;if($("body").find("form").children('input[name="THEME"]').size()>0){sThemeGraphicOfClient=$('input[name="THEME"]').val().toLowerCase()}else{if(getValueNameInUrlRequest("TM")!==""||getValueNameInUrlRequest("TM")!==undefined){sThemeGraphicOfClient=getValueNameInUrlRequest("TM").toLowerCase()}}if(sThemeGraphicOfClient!==""){$("body").addClass(sThemeGraphicOfClient)}$("form").children("div").children("a").click(function(){$("form").attr("action","EmailForgetPasswordForm.jsp?TM="+sThemeGraphicOfClient.toUpperCase());$('form[name="LoginForm"]').submit()})}function customizeTheLoginPage(){var sAttributeNameOfTheForm;var sAttributeActionOfTheForm;if($("body").hasClass("travel")&&$("body").find("form").size()>0){if($("form").is("[name]")){sAttributeNameOfTheForm=$("form").attr("name").toLowerCase();if(typeof sAttributeNameOfTheForm!==typeof undefined&&sAttributeNameOfTheForm!==false){$("body").addClass(sAttributeNameOfTheForm)}}if($("form").is("[action]")){sAttributeActionOfTheForm=$("form").attr("action").toLowerCase().slice(0,$("form").attr("action").toLowerCase().indexOf("."));if(typeof sAttributeActionOfTheForm!==typeof undefined&&sAttributeActionOfTheForm!==false){$("body").addClass(sAttributeActionOfTheForm)}}if(sAttributeNameOfTheForm==="loginform"||sAttributeNameOfTheForm==="passwordform"){if($("body").find("form").children('input[name="T_Login"]').size()>0){$('input[name="T_Login"]').focus()}insertsCodeGraphicOfThemeClient();managesEventsInTheForm()}}}function customizePopinSatisfaction(){var sAttributeNameOfTheForm;if($("body").hasClass("travel")&&$("body").find("form").size()>0){sAttributeNameOfTheForm=$("form").attr("name").toLowerCase();if(sAttributeNameOfTheForm==="customersatisfaction"){window.parent.$.fancybox.resize();$("form").children("div").each(function(){var nameOfSmiley=$(this).children("img").attr("src").substr(-12);nameOfSmiley=nameOfSmiley.slice(0,nameOfSmiley.indexOf("."));$(this).addClass(nameOfSmiley)});$("form").children('input[name="backFormCustomSatisfaction"]').click(function(){window.parent.$.fancybox.close()})}}$("#customer-satisfaction").each(function(){var heightMainColumn=725;var heightMainTable=$("td.MainColumnBg").children("table").height();var heightCustomChoice=$(this).height();var heightRef=heightMainTable;var ratioEmPx=16;var startPosEm=26;var marginBottom=75;if(heightMainTable<heightMainColumn){$(this).addClass("fixed")}if(!$(this).hasClass("fixed")){$(window).on("load",function(){if(window.innerHeight<heightMainColumn){heightRef=window.innerHeight;newMarginTop=(heightRef+heightMainColumn+marginBottom-heightCustomChoice)/ratioEmPx+startPosEm}else{newMarginTop=(heightRef+heightCustomChoice/2+marginBottom-window.innerHeight)/ratioEmPx+startPosEm}$("#customer-satisfaction").css("margin-top",-newMarginTop+"em")});$(window).on("scroll",function(){setTimeout(function(){$("#customer-satisfaction").animate({marginTop:-startPosEm+"em"},2e3,function(){$(this).addClass("fixed")})},1e3)})}$(this).animate({opacity:1},1e3);$("#dv-button-cross").click(function(){$(this).toggleClass("cross-shown hide-cross");if(!$(this).parent("section").hasClass("selected")){$("#dv-button-smile").toggleClass("hide-smile smile-shown")}$("#dv-content").toggleClass("content-shown content-hidden");$("#dv-content-choice").children("ul").children("li").each(function(){$(this).animate({opacity:0},500)})});$("#dv-button-smile").click(function(){$(this).toggleClass("smile-shown hide-smile");$("#dv-button-cross").toggleClass("hide-cross cross-shown");$("#dv-content").toggleClass("content-hidden content-shown");$("#dv-content-choice").children("ul").children("li").each(function(i){$(this).animate({opacity:1},500*i)})});$("#dv-content-choice").children("ul").each(function(){$(this).mouseleave(function(){if(!$(this).hasClass("selected")){$(this).children("li").removeClass("disabled")}});$(this).children("li").click(function(e){$(this).parent("ul").children("li").off("click");if(!$(this).parent("ul").hasClass("selected")){$(this).addClass("selected");$(this).parent("ul").addClass("selected");$("#customer-satisfaction").addClass("selected");$("#dv-content-choice").children("p").addClass("content-hidden");var parentOffset=$(this).offset(),cursorX=e.pageX-parentOffset.left,cursorY=e.pageY-parentOffset.top;$(this).append('<div class="ripple"></div>');$(this).children(".ripple").css({left:cursorX+"px",top:cursorY+"px"});$("#dv-content-thanks").css("display","block");setTimeout(function(){$("#dv-content-thanks").children("p").fadeIn()},500);setTimeout(function(){$("#customer-satisfaction").fadeOut(1e3)},2e3)}});$(this).children("li").each(function(){if(!$(this).hasClass("selected")){$(this).hover(function(){$(this).parent("ul").children("li").each(function(){$(this).addClass("disabled")});$(this).removeClass("disabled")})}})})})}function displaysEntityMemorizedByCookie(){var sCookieValue=readCookie("_SAMLSSO");var sTitleOfEntity;$("body").children("#sct_content").children("aside").children("article").each(function(){sTitleOfEntity=replacesAccentedCharacters($(this).children("a").children("div").first().text().toLowerCase());if(sTitleOfEntity===sCookieValue){$(location).attr("href",$(this).children("a").attr("href"))}})}function turnsIdpPageIntoAnAlphabeticalList(){var tAlphabeticalList=["Z","Y","X","W","V","U","T","S","R","Q","P","O","N","M","L","K","J","I","H","G","F","E","D","C","B","A"];var tSortedAlphabeticalList=[];var iPositionIndexOfTable=0;var sAlphabeticalList;var sTitleOfEntity;var sHtmlCodeFromDropDownList="";var cookieEnabled;if($("body").hasClass("selection")&&$("body").hasClass("idp")){$("body").addClass("byLineOfThree");if(readCookie("_SAMLSSO")!==null){$("body").addClass("waiting");displaysEntityMemorizedByCookie();return false}$("body").children("#sct_content").children("aside").children("article").each(function(){sTitleOfEntity=$(this).children("a").children("div").first().text();if(sTitleOfEntity.length>30){$(this).attr("title",sTitleOfEntity)}tSortedAlphabeticalList[iPositionIndexOfTable]=replacesAccentedCharacters(sTitleOfEntity.toLowerCase());iPositionIndexOfTable++});tSortedAlphabeticalList.sort().reverse();for(i=0;i<tSortedAlphabeticalList.length;i++){$("body").children("#sct_content").children("aside").children("article").each(function(){sTitleOfEntity=$(this).children("a").children("div").first().text();if(tSortedAlphabeticalList[i]===replacesAccentedCharacters(sTitleOfEntity.toLowerCase())){$(this).prependTo($(this).parent("aside"))}})}for(i=0;i<tAlphabeticalList.length;i++){$("body").children("#sct_content").children("aside").children("article").each(function(){sTitleOfEntity=$(this).children("a").children("div").first().text();if(tAlphabeticalList[i].toLowerCase()===replacesAccentedCharacters(sTitleOfEntity.slice(0,1).toLowerCase())){if(iPositionIndexOfTable!==i){$(this).parent("aside").prepend('<section class="listStartingWith'+tAlphabeticalList[i]+'"></section>');iPositionIndexOfTable=i}$(this).appendTo($(this).parent("aside").children('section[class="listStartingWith'+tAlphabeticalList[i]+'"]'))}})}$("body").children("#sct_content").children("aside").children("section").each(function(){sAlphabeticalList=$(this).attr("class").substr(-1);$(this).prepend("<header><h2>"+sAlphabeticalList+"</h2></header>");$(this).children("article").each(function(){sTitleOfEntity=$(this).children("a").children("div").first().text()})});$("body").children("#sct_content").children("aside").children("section").children("article").click(function(){sTitleOfEntity=replacesAccentedCharacters($(this).children("a").children("div").first().text().toLowerCase());cookieEnabled=navigator.cookieEnabled?true:false;if(cookieEnabled){createCookie("_SAMLSSO",sTitleOfEntity,365)}});$("body").fadeIn(1e3)}}function newHelpSite(){if($("body").hasClass("help-online")){$("head").append('<link rel="stylesheet" href="/graph/_shared/css/helpsite.min.css" >')}}var onPageReady=function(){initializesBodyTagByCss();addsClassFromNameOfJspOrIdOfMainContainer();insertsSubmenuPictoIntoTheHeader();makeTheHtmlPageResponsive();inscriptsTheYearOfTheCopyright();handlesTheFancyBoxMethod();presentsTravelerInformationOnMyTrips();limitsDisplayOfTripSharingLines();formateTheNameOfHotel();customizeTheLoginPage();customizePopinSatisfaction();turnsIdpPageIntoAnAlphabeticalList();personalizeThePopInPerDiem()};if(typeof initializeWithGwt=="undefined"){$(document).ready(onPageReady)}