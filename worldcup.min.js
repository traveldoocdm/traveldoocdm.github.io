var $=jQuery.noConflict();function getParameter(e){var t={};return window.location.href.replace(location.hash,"").replace(/[?&]+([^=&]+)=?([^&]*)?/gi,function(e,r,n){t[r]=void 0!==n?n:""}),e?t[e]?t[e]:null:t}function resizeContent(e){var t=parseInt($(window).height()+e);$(".scorecast_widget").css("max-height",t+"px")}function copyTheSecondTable(){var e="",t="",r=$(".scorecast_widget"),n=["NONAME","JASONTRAVELDOO","RONDEL","BABS007","AGATHA","FRANCE123-0"];r.each(function(r){r>0&&($(this).children("table").children("thead").remove(),$(this).children("table").children("tbody").children("tr").each(function(){$(this).children("td").each(function(){$(this).hasClass("user")&&(t=$(this).children("a").children("span").text().toLowerCase())}),n.includes(t.toUpperCase())||(e+="<tr>"+$(this).html()+"</tr>")}),$(this).first().children("table").children("tbody").append(e))}),r.each(function(e){e>0&&$(this).remove()}),r.first().children("table").children("tbody").append(e)}function upDateTheScore(){$(".scorecast_widget").children("table").children("tbody").children("tr").each(function(){var e,t=0;$(this).children("td").each(function(){$(this).hasClass("user")&&(e=$(this).children("a").children("span").text().toLowerCase()),$(this).hasClass("total")&&(t=parseInt($(this).text()),"gorsel"!=e&&"pierluigi collina"!=e&&"playerunknown"!=e||(t=(t+=10).toString(),$(this).html(t)))})})}function sortTheTable(){$(".scorecast_widget").children("table").tablesorter({sortList:[[2,1],[1,0]]})}function extract(e,t){var r="",n=$(".scorecast_widget").children("table").children("tbody").children("tr").size();$(".scorecast_widget").children("table").children("tbody").children("tr").each(function(i){("leader"==t&&i<e||"looser"==t&&i>n-e-1)&&(r+="<tr>"+$(this).html()+"</tr>",$(this).remove())}),"leader"==t?$(".scorecast_leader").html("<table>"+r+"</table>"):$(".scorecast_looser").html("<table>"+r+"</table>")}function sectionRanking(e,t){e.children("table").children("tbody").children("tr").each(function(){var e,r;$(this).children("td").each(function(){$(this).hasClass("center")&&(r=$(this)),$(this).hasClass("total")&&(e=$(this).html())}),++t.current,e!=t.previousScore?r.html(t.current):r.html("-"),t.previousScore=e})}function showRanking(){var e={current:0,previousScore:-1};sectionRanking($(".scorecast_leader"),e),sectionRanking($(".scorecast_widget"),e),sectionRanking($(".scorecast_looser"),e),resizeContent(-360),$("body").addClass("displayedScore")}function favicon(){$("head").children('link[rel="shortcut icon"]').attr("href","./favicon.ico")}function splitTableScore(){var e="",t="";$(".scorecast_widget").each(function(){var r=$(this).children("table").children("tbody").children("tr").size();$(this).children("table").children("tbody").children("tr").each(function(n){n<16&&(e+="<tr>"+$(this).html()+"</tr>",$(this).remove()),n>r-13&&(t+="<tr>"+$(this).html()+"</tr>",$(this).remove())})}),$(".dv_left").children(".scorecast_content").html("<table>"+e+"</table>"),$(".dv_right").children(".scorecast_content").html("<table>"+t+"</table>"),resizeContent(-150)}$(document).ready(function(){$("#boxscroll").niceScroll({cursorborder:"",cursorcolor:"#000000",cursorborderradius:"15px",cursoropacitymax:.75}),$(window).bind("load",function(){favicon(),resizeContent(-375),copyTheSecondTable(),sortTheTable(),extract(3,"leader"),extract(3,"looser"),showRanking(),$("body").hasClass("smartphone")||$("body").hasClass("tablette")&&$("body").hasClass("portrait")||getParameter("spl")&&($("body").addClass("split"),splitTableScore())}),$(window).on("resize",function(){resizeContent(-375)})});
